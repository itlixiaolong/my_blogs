(window.webpackJsonp=window.webpackJsonp||[]).push([[92],{417:function(t,e,a){"use strict";a.r(e);var s=a(17),n=Object(s.a)({},(function(){var t=this,e=t._self._c;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"vue单元测试常见问题及及解决方案"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#vue单元测试常见问题及及解决方案"}},[t._v("#")]),t._v(" 📗 vue单元测试常见问题及及解决方案")]),t._v(" "),e("h2",{attrs:{id:"_1-document原生方法注册"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-document原生方法注册"}},[t._v("#")]),t._v(" 📎 1.document原生方法注册")]),t._v(" "),e("p",[t._v("问题：单元测试环境下无法获取document方法\n例：document.getElementById\n解决方案：jest.spyOn().mockImplementation()")]),t._v(" "),e("p",[e("img",{attrs:{src:"https://img-blog.csdnimg.cn/b8c4c42cd5eb4a6689e838b767561d33.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2xpeGlhb2xvbmcyNDAwMzU=,size_16,color_FFFFFF,t_70",alt:"在这里插入图片描述"}})]),t._v(" "),e("h2",{attrs:{id:"_2-window自定义属性注册"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-window自定义属性注册"}},[t._v("#")]),t._v(" 📎 2.window自定义属性注册")]),t._v(" "),e("p",[t._v("问题：单元测试环境下无法获取所有window属性\n例：window.zhuge.方法名（失效）")]),t._v(" "),e("p",[e("img",{attrs:{src:"https://img-blog.csdnimg.cn/63ad311338944d8681c2df3483214ef3.png",alt:"在这里插入图片描述"}})]),t._v(" "),e("p",[t._v("解决方案：jest.spyOn().mockImplementation()\n"),e("img",{attrs:{src:"https://img-blog.csdnimg.cn/fe1548534aa54f67bead50f4d709cff6.png",alt:"在这里插入图片描述"}})]),t._v(" "),e("h2",{attrs:{id:"_3-element-ui等外接组件注册"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3-element-ui等外接组件注册"}},[t._v("#")]),t._v(" 📎 3.element-ui等外接组件注册")]),t._v(" "),e("p",[t._v("问题:单元测试环境下无法识别除vue框架本身的组件\n例：调用element-ui\n解决方案：\n"),e("img",{attrs:{src:"https://img-blog.csdnimg.cn/805d3716e7f34e8b93fa815c7ecc3ea8.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2xpeGlhb2xvbmcyNDAwMzU=,size_16,color_FFFFFF,t_70",alt:"在这里插入图片描述"}})]),t._v(" "),e("p",[t._v("注意要将注册组件的函数挂载到wrapper当中\n"),e("img",{attrs:{src:"https://img-blog.csdnimg.cn/d1c2d0d7f13640d5a70d29f55e1cfbd2.png",alt:"在这里插入图片描述"}})]),t._v(" "),e("h2",{attrs:{id:"_4-纯展示外部组件替换渲染方式"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_4-纯展示外部组件替换渲染方式"}},[t._v("#")]),t._v(" 📎 4.纯展示外部组件替换渲染方式")]),t._v(" "),e("p",[e("img",{attrs:{src:"https://img-blog.csdnimg.cn/41d3fcf6370c437cbd7607e81455507a.png",alt:"在这里插入图片描述"}})]),t._v(" "),e("h2",{attrs:{id:"_5-wrapper-find-方法踩坑"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_5-wrapper-find-方法踩坑"}},[t._v("#")]),t._v(" 📎 5.wrapper.find()方法踩坑")]),t._v(" "),e("p",[t._v("使用wrapper.find()方法获取dom对象时，此方法优先获取wrapper实例中render()函数中返回的结构，如果render()返回中不存在对应dom，则会导致wrapper.find()返回ErrorWrapper\n例：\n"),e("img",{attrs:{src:"https://img-blog.csdnimg.cn/843dd18f47c24a088d00dc9ee27d229a.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2xpeGlhb2xvbmcyNDAwMzU=,size_16,color_FFFFFF,t_70",alt:"在这里插入图片描述"}})]),t._v(" "),e("h2",{attrs:{id:"_6-对于第三方组件的逻辑测试-如elementui"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_6-对于第三方组件的逻辑测试-如elementui"}},[t._v("#")]),t._v(" 📎 6.对于第三方组件的逻辑测试,如elementui")]),t._v(" "),e("p",[e("img",{attrs:{src:"https://img-blog.csdnimg.cn/77cb57c31c294422a4eccf10eed1da19.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2xpeGlhb2xvbmcyNDAwMzU=,size_16,color_FFFFFF,t_70",alt:"在这里插入图片描述"}})]),t._v(" "),e("p",[t._v("对于find和findAll找到的元素统一使用trigger触发事件\n对于findComponent和findAllComponents找到的组件统一使用wrapper.vm.$emit()触发事件")]),t._v(" "),e("p",[t._v("方法一:\n对于el-开头的组件使用mount渲染,可以使用find找到根节点元素,然后通过trigger触发事件或者使用findComponentd找到组件,然后通过wrapper.vm.$emit()触发事件")]),t._v(" "),e("p",[e("img",{attrs:{src:"https://img-blog.csdnimg.cn/2ebe44272e484b67879c53de95fcc4f7.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2xpeGlhb2xvbmcyNDAwMzU=,size_16,color_FFFFFF,t_70",alt:"在这里插入图片描述"}})]),t._v(" "),e("p",[t._v("如果想stub掉某个子组件,测试它触发的事件,必须使用find或者findAll获取元素,然后使用wrapper.vm.$emit()触发\n"),e("img",{attrs:{src:"https://img-blog.csdnimg.cn/193c1fa0e1d64a08aa605cf66c1a66a6.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2xpeGlhb2xvbmcyNDAwMzU=,size_16,color_FFFFFF,t_70",alt:"在这里插入图片描述"}})]),t._v(" "),e("p",[t._v("方法二:\n对于el-开头的组件使用shallowMount渲染,需要借用localVue将el组件注入,shallowMount会自动将组件stub,这时只能使用findComponentd找到组件,然后通过wrapper.vm.$emit()触发事件")]),t._v(" "),e("p",[e("img",{attrs:{src:"https://img-blog.csdnimg.cn/3a8c41c90045447b89514ad84b6c8e5c.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2xpeGlhb2xvbmcyNDAwMzU=,size_16,color_FFFFFF,t_70",alt:"在这里插入图片描述"}})]),t._v(" "),e("h2",{attrs:{id:"_7-对于引入node-modules依赖的报错"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_7-对于引入node-modules依赖的报错"}},[t._v("#")]),t._v(" 📎 7.对于引入node_modules依赖的报错")]),t._v(" "),e("p",[e("img",{attrs:{src:"https://img-blog.csdnimg.cn/594c7f51dcff4d619ed023045f70a119.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2xpeGlhb2xvbmcyNDAwMzU=,size_16,color_FFFFFF,t_70",alt:"在这里插入图片描述"}})]),t._v(" "),e("p",[t._v("可以通过配置jest.config.js来解决")]),t._v(" "),e("p",[e("img",{attrs:{src:"https://img-blog.csdnimg.cn/680aab3426504075b57f21751cfd5cd9.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2xpeGlhb2xvbmcyNDAwMzU=,size_16,color_FFFFFF,t_70",alt:"在这里插入图片描述"}})])])}),[],!1,null,null,null);e.default=n.exports}}]);